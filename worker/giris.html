<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GÃ¼vÉ™n Finans | GiriÅŸ</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600;700&display=swap" rel="stylesheet"/>

    <link rel="stylesheet" href="../assets/css/worker_profile_css/worker_profile.css">
</head>

<body>
<div class="profile-container">
    <!-- TOPBAR -->
    <header class="topbar">
        <div class="brand">
            <div class="brand-icon"><i class="fa-solid fa-chart-line"></i></div>
            <div class="brand-text">
                <h1 class="brand-title">GÃ¼vÉ™n Finans</h1>
                <p class="brand-subtitle">UÄŸurlar GÃ¼vÉ™nlÉ™ BaÅŸlar</p>
            </div>
        </div>

        <div class="topbar-actions">
            <button id="settingsToggle" class="icon-btn" type="button" aria-label="TÉ™nzimlÉ™mÉ™lÉ™r">
                <i class="fa-solid fa-gear"></i>
            </button>

            <div class="user-pill">
                <div class="user-avatar">GF</div>
                <div class="user-info">
                    <p class="user-company" id="companyNameDisplay">ÅžirkÉ™tin adÄ± qeyd olunmayÄ±b</p>
                    <p class="user-name" id="userNameDisplay">AdÄ±nÄ±zÄ± qeyd edin</p>
                </div>
            </div>
        </div>
    </header>

    <div class="settings-popover">
        <div id="settingsMenu" class="settings-menu hidden">
            <a href="../index.html" class="menu-link">
                <i class="fa-solid fa-house"></i>
                Ana SÉ™hifÉ™
            </a>
            <button class="menu-link" id="logoutButton" type="button">
                <i class="fa-solid fa-right-from-bracket"></i>
                Ã‡Ä±xÄ±ÅŸ
            </button>
        </div>
    </div>

    <div class="layout">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <h2 class="sidebar-title">Ä°darÉ™etmÉ™</h2>
            <nav class="sidebar-nav">
                <a href="./giris.html" class="sidebar-link sidebar-link--active">
                    <i class="fa-solid fa-door-open"></i>
                    GiriÅŸ
                </a>

                <a href="./wp.html" class="sidebar-link">
                    <i class="fa-solid fa-user"></i>
                    Profil
                </a>

                <a href="../diogram/draw.html" class="sidebar-link">
                    <i class="fa-solid fa-chart-pie"></i>
                    Diaqram
                </a>

                <a href="../task/task.html" class="sidebar-link">
                    <i class="fa-solid fa-list-check"></i>
                    Task Manager
                </a>

                <a href="#" id="openCompaniesModalBtn" class="sidebar-link">
                    <i class="fa-solid fa-building"></i>
                    ÅžirkÉ™tlÉ™rin Listi
                </a>

                <a href="#" id="openPartniorModalBtn" class="sidebar-link">
                    <i class="fa-solid fa-handshake"></i>
                    PartniyorlarÄ±n listi
                </a>
            </nav>
        </aside>

        <!-- CONTENT -->
        <main class="content-card">
            <section class="welcome">
                <div class="welcome-card">
                    <span class="section-badge">GiriÅŸ</span>
                    <h2 class="welcome-title">
                        XoÅŸ gÉ™ldiniz, <span id="welcomeName">...</span> ðŸ‘‹
                    </h2>
                    <p class="section-desc">
                        Buradan sistemÉ™ Ã¼mumi baxÄ±ÅŸ edÉ™ bilÉ™rsiniz.
                    </p>
                </div>
            </section>
        </main>
    </div>
</div>

<!-- Worker-dÉ™ wp.html-dÉ™ hansÄ± script-lÉ™r varsa, eynisini burada saxla -->
<script src="../assets/js/worker_profile_js/api.service.js"></script>
<script src="../assets/js/worker_profile_js/main.js"></script>
<script src="../assets/js/worker_profile_js/auth.service.js"></script>
<script src="../assets/js/worker_profile_js/profile.service.js"></script>
<script src="../assets/js/worker_profile_js/file.service.js"></script>
<script src="../assets/js/worker_profile_js/ui.service.js"></script>
<script src="../assets/js/worker_profile_js/company.service.js"></script>
<script src="../assets/js/worker_profile_js/partners.modal.js"></script>
<script src="../assets/js/worker_profile_js/logoutHandler.js"></script>

<!-- SalamlamanÄ± DB-dÉ™n gÉ™lÉ™n ad ilÉ™ doldurmaq -->
<script>
    (function () {
        function pickName() {
            const dom = document.getElementById("userNameDisplay");
            const text = dom ? dom.textContent.trim() : "";
            if (text && !/AdÄ±nÄ±zÄ± qeyd edin/i.test(text)) return text;

            try {
                const keys = ["user","currentUser","profile","workerProfile","ownerProfile"];
                for (const k of keys) {
                    const raw = localStorage.getItem(k);
                    if (!raw) continue;
                    const obj = JSON.parse(raw);
                    const full =
                        obj.fullName ||
                        obj.name ||
                        [obj.firstName, obj.lastName].filter(Boolean).join(" ");
                    if (full) return full;
                }
            } catch (e) {}
            return "";
        }

        function tick() {
            const name = pickName();
            if (name) {
                document.getElementById("welcomeName").textContent = name;
                return;
            }
            setTimeout(tick, 200);
        }

        document.addEventListener("DOMContentLoaded", tick);
    })();
</script>
</body>
</html>
