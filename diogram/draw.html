<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowDraw - Professional Diagramming Tool</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/draw_css/draw.css">
</head>
<body>

    <div class="header">
        <div class="header-actions">
            <!-- Dəyişiklik: id dəqiqləşdir -->
            <a href="#" class="back-btn" id="backPanelBtn" title="Dashboard-a qayıt">
                <i class="fas fa-arrow-left"></i>
                <span>Panelə Qayıt</span>
            </a>
        </div>
        <div class="logo">
            <i class="fas fa-project-diagram"></i>
            <span>FlowDraw</span>
        </div>
        <div class="toolbar">
            <!-- Undo/Redo düymələrini əlavə edin -->
            <button class="btn" id="undoBtn" title="Undo (Ctrl+Z)">
                <i class="fas fa-undo"></i>
                <span>Undo</span>
            </button>
            <button class="btn" id="redoBtn" title="Redo (Ctrl+Y)">
                <i class="fas fa-redo"></i>
                <span>Redo</span>
            </button>

            <button class="btn" id="newBtn">
                <i class="fas fa-file"></i>
                <span>New</span>
            </button>

            <button class="btn" id="loadBtn" title="Load Saved Diagrams">
                <i class="fas fa-folder-open"></i>
                <span>Load</span>
            </button>
            <button class="btn" id="saveBtn">
                <i class="fas fa-save"></i>
                <span>Save</span>
            </button>
            <button class="btn" id="exportBtn">
                <i class="fas fa-download"></i>
                <span>Export</span>
            </button>
            <button class="btn btn-primary" id="shareBtn">
                <i class="fas fa-share"></i>
                <span>Share</span>
            </button>
        </div>
    </div>

    <div class="container">
        <!-- Sidebar with shapes -->
        <div class="sidebar" id="sidebar">
            <button class="collapse-btn" id="collapseBtn">
                <i class="fas fa-chevron-left"></i>
            </button>

            <div class="sidebar-section">
                <h3>Shapes</h3>
                <!-- shapes-grid hissəsini yeniləyin -->
                <div class="shapes-grid">
                    <!-- Basic Shapes -->
                    <div class="shape-item" data-type="rectangle">
                        <div class="shape-icon">
                            <i class="fas fa-square-full"></i>
                        </div>
                        <span class="shape-name">Rectangle</span>
                    </div>
                    <div class="shape-item" data-type="rounded-rectangle">
                        <div class="shape-icon">
                            <div style="width:24px;height:18px;border:2px solid #000;border-radius:5px;background:#4dabf7"></div>
                        </div>
                        <span class="shape-name">Rounded Rect</span>
                    </div>
                    <div class="shape-item" data-type="circle">
                        <div class="shape-icon">
                            <i class="fas fa-circle"></i>
                        </div>
                        <span class="shape-name">Circle</span>
                    </div>
                    <div class="shape-item" data-type="ellipse">
                        <div class="shape-icon">
                            <div style="width:28px;height:18px;border:2px solid #000;border-radius:50%;background:#4dabf7"></div>
                        </div>
                        <span class="shape-name">Ellipse</span>
                    </div>
                    <div class="shape-item" data-type="triangle">
                        <div class="shape-icon">
                            <i class="fas fa-play"></i>
                        </div>
                        <span class="shape-name">Triangle</span>
                    </div>
                    <div class="shape-item" data-type="diamond">
                        <div class="shape-icon">
                            <i class="fas fa-gem"></i>
                        </div>
                        <span class="shape-name">Diamond</span>
                    </div>
                    <div class="shape-item" data-type="cylinder">
                        <div class="shape-icon">
                            <i class="fas fa-oil-can"></i>
                        </div>
                        <span class="shape-name">Cylinder</span>
                    </div>
                    <div class="shape-item" data-type="parallelogram">
                        <div class="shape-icon">
                            <div style="width:24px;height:18px;border:2px solid #000;background:#4dabf7;transform:skewX(-20deg);margin:0 auto"></div>
                        </div>
                        <span class="shape-name">Parallelogram</span>
                    </div>
                    <div class="shape-item" data-type="hexagon">
                        <div class="shape-icon">
                            <div style="width:24px;height:20px;background:#4dabf7;position:relative;clip-path:polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);border:2px solid #000"></div>
                        </div>
                        <span class="shape-name">Hexagon</span>
                    </div>
                    <div class="shape-item" data-type="cloud">
                        <div class="shape-icon">
                            <i class="fas fa-cloud"></i>
                        </div>
                        <span class="shape-name">Cloud</span>
                    </div>
                    <div class="shape-item" data-type="document">
                        <div class="shape-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <span class="shape-name">Document</span>
                    </div>
                    <div class="shape-item" data-type="database">
                        <div class="shape-icon">
                            <i class="fas fa-database"></i>
                        </div>
                        <span class="shape-name">Database</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Connectors</h3>
                <div class="shapes-grid">
                    <div class="shape-item" data-type="line">
                        <div class="shape-icon">
                            <i class="fas fa-minus"></i>
                        </div>
                        <span class="shape-name">Line</span>
                    </div>
                    <div class="shape-item" data-type="curve">
                        <div class="shape-icon">
                            <i class="fas fa-wave-square"></i>
                        </div>
                        <span class="shape-name">Curve</span>
                    </div>
                    <div class="shape-item" data-type="elbow">
                        <div class="shape-icon">
                            <i class="fas fa-angle-right"></i>
                        </div>
                        <span class="shape-name">Elbow</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Format</h3>
                <div class="format-controls">
                    <div class="color-picker">
                        <label>Fill Color:</label>
                        <input type="color" id="fillColor" value="#4dabf7">
                    </div>
                    <div class="color-picker">
                        <label>Stroke Color:</label>
                        <input type="color" id="strokeColor" value="#1a365d">
                    </div>
                    <div class="slider-control">
                        <label>Stroke Width:</label>
                        <input type="range" id="strokeWidth" min="1" max="10" value="2">
                        <span id="strokeWidthValue">2px</span>
                    </div>
                    <div class="slider-control">
                        <label>Font Size:</label>
                        <input type="range" id="fontSize" min="10" max="36" value="14">
                        <span id="fontSizeValue">14px</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3>Layers</h3>
                <div class="layers-list" id="layersList">
                    <!-- Layers will be added dynamically -->
                </div>
            </div>
        </div>

        <!-- Main drawing area -->
        <div class="main-content">
            <div class="canvas-container">
                <div class="canvas-toolbar">
                    <button class="canvas-btn active" id="selectBtn" title="Select">
                        <i class="fas fa-mouse-pointer"></i>
                    </button>
                    <button class="canvas-btn" id="panBtn" title="Pan">
                        <i class="fas fa-hand-paper"></i>
                    </button>
                    <button class="canvas-btn" id="freehandBtn" title="Freehand Drawing (F)">
                        <i class="fas fa-pencil-alt"></i>
                    </button>
                    <button class="canvas-btn" id="textBtn" title="Add Text">
                        <i class="fas fa-font"></i>
                    </button>
                    <button class="canvas-btn" id="editTextBtn" title="Edit Text (Double Click)">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="canvas-btn" id="deleteBtn" title="Delete">
                        <i class="fas fa-trash"></i>
                    </button>
                    <div class="zoom-controls">
                        <button class="zoom-btn" id="zoomOutBtn">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <span id="zoomLevel">100%</span>
                        <button class="zoom-btn" id="zoomInBtn">
                            <i class="fas fa-search-plus"></i>
                        </button>
                        <button class="zoom-btn" id="resetZoomBtn">
                            <i class="fas fa-expand-arrows-alt"></i>
                        </button>
                    </div>
                </div>

                <div class="canvas-wrapper">
                    <canvas id="drawingCanvas"></canvas>
                    <div class="grid-overlay" id="gridOverlay"></div>
                </div>

                <div class="status-bar">
                    <div class="coordinates" id="coordinates">X: 0, Y: 0</div>
                    <div class="selection-info" id="selectionInfo">No selection</div>
                    <div class="canvas-size" id="canvasSize">Canvas: 1200 × 800</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
        <div class="context-item" data-action="copy">
            <i class="fas fa-copy"></i>
            <span>Copy</span>
        </div>
        <div class="context-item" data-action="paste">
            <i class="fas fa-paste"></i>
            <span>Paste</span>
        </div>
        <div class="context-item" data-action="delete">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
        </div>
        <div class="context-item" data-action="deleteConnections">
            <i class="fas fa-unlink"></i>
            <span>Delete Connections</span>
        </div>
        <div class="context-divider"></div>
        <div class="context-item" data-action="bringToFront">
            <i class="fas fa-arrow-up"></i>
            <span>Bring to Front</span>
        </div>
        <div class="context-item" data-action="sendToBack">
            <i class="fas fa-arrow-down"></i>
            <span>Send to Back</span>
        </div>
    </div>

    <!-- Modals -->
    <div class="modal" id="textModal">
        <div class="modal-content">
            <h3>Add Text</h3>
            <textarea id="textInput" placeholder="Enter your text here..."></textarea>
            <div class="modal-actions">
                <button class="btn" id="cancelTextBtn">Cancel</button>
                <button class="btn btn-primary" id="addTextBtn">Add Text</button>
            </div>
        </div>
    </div>

    <!-- Load Modal -->
    <div class="modal" id="loadModal">
        <div class="modal-content" style="max-width: 800px; max-height: 80vh;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0;">Load Diagram</h3>
                <button id="closeLoadModal" style="background: none; border: none; font-size: 20px; cursor: pointer; color: #666;">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- View Switcher -->
            <div class="diagram-view-switcher" style="margin-bottom: 20px;">
                <button class="view-switch-btn active" data-view="my-diagrams">My Diagrams</button>
                <button class="view-switch-btn" data-view="shared-with-me">Shared with Me</button>
            </div>

            <!-- Search Box -->
            <div style="margin-bottom: 20px;">
                <input type="text" id="diagramSearch" placeholder="Search diagrams..."
                       style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;">
            </div>

            <!-- Diagrams List -->
            <div id="savedDiagramsList" style="
                max-height: 400px;
                overflow-y: auto;
                border: 1px solid #eee;
                border-radius: 4px;
                margin-bottom: 20px;
            ">
                <!-- Diagrams will be loaded here -->
            </div>

            <!-- Pagination -->
            <div id="loadPagination" style="display: flex; justify-content: center; gap: 10px; margin-bottom: 20px;"></div>

            <!-- Actions -->
            <div class="modal-actions" style="display: flex; justify-content: flex-end; gap: 10px;">
                <button class="btn" id="cancelLoadBtn">Cancel</button>
                <button class="btn btn-primary" id="confirmLoadBtn" disabled>Load Selected</button>
            </div>
        </div>
    </div>

    <div class="modal" id="exportModal">
        <div class="modal-content">
            <h3>Export Diagram</h3>
            <div class="export-options">
                <div class="export-option">
                    <input type="radio" id="exportPNG" name="exportFormat" value="png" checked>
                    <label for="exportPNG">PNG Image</label>
                </div>
                <div class="export-option">
                    <input type="radio" id="exportSVG" name="exportFormat" value="svg">
                    <label for="exportSVG">SVG Vector</label>
                </div>
                <div class="export-option">
                    <input type="radio" id="exportJSON" name="exportFormat" value="json">
                    <label for="exportJSON">JSON Data</label>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn" id="cancelExportBtn">Cancel</button>
                <button class="btn btn-primary" id="confirmExportBtn">Export</button>
            </div>
        </div>
    </div>



    <!-- Əvvəlcə manager faylları -->
    <script src="../assets/js/draw_js/canvas-manager.js"></script>
    <script src="../assets/js/draw_js/event-handler.js"></script>
    <script src="../assets/js/draw_js/control-manager.js"></script>
    <script src="../assets/js/draw_js/history-manager.js"></script>
    <script src="../assets/js/draw_js/export-manager.js"></script>
    <script src="../assets/js/draw_js/shape-manager.js"></script>
    <script src="../assets/js/draw_js/clipboard-manager.js"></script>

    <!-- Sonra API və Load manager -->
    <script src="../assets/js/draw_js/api-manager.js"></script>
    <script src="../assets/js/draw_js/load-manager.js"></script>
    <script src="../assets/js/draw_js/dashboard-redirect.js"></script>

    <!-- Sonra əsas fayl -->
    <script src="../assets/js/draw_js/main.js"></script>

</body>
</html>